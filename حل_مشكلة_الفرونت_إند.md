# ๐ง ุญู ูุดููุฉ ุนููุงู API ูู ุงููุงุฌูุฉ ุงูุฃูุงููุฉ

## ๐ ุงููุดููุฉ

ุนูุฏ ุชุญุฏูุซ ูููุงุช ุงููุงุฌูุฉ ุงูุฃูุงููุฉ (Frontend) ูุฑูุนูุง ููุฎุงุฏูุ ูุง ูุชู ุชุญุฏูุซ ุงููููุงุช ูู Docker volumeุ ูุชุจูู ุงููุงุฌูุฉ ุชุทูุจ ุงูุนููุงู ุงููุฏูู:
```
http://localhost:5000/api/auth/login
```

ุจุฏูุงู ูู:
```
https://medmapgloble.com/api/auth/login
```

---

## ๐ฏ ุงูุญู

ุชู ุฅูุดุงุก ุณูุฑูุจุช ุฎุงุต ูุชุญุฏูุซ ุงููุงุฌูุฉ ุงูุฃูุงููุฉ: **`update-frontend.sh`**

---

## ๐ ุทุฑููุฉ ุงูุงุณุชุฎุฏุงู

### ุงูุทุฑููุฉ ุงูุฃููู: ุจุงุณุชุฎุฏุงู Make (ููุตู ุจู)
```bash
make update-frontend
```

### ุงูุทุฑููุฉ ุงูุซุงููุฉ: ุจุงุณุชุฎุฏุงู ุงูุณูุฑูุจุช ูุจุงุดุฑุฉ
```bash
chmod +x update-frontend.sh
./update-frontend.sh
```

### ุงูุทุฑููุฉ ุงูุซุงูุซุฉ: ุชุญุฏูุซ ูุงูู (API + Frontend)
```bash
make update
# ุซู ุงุฎุชุฑ ุงูุฎูุงุฑ 3 (ููุงููุง)
```

---

## โ๏ธ ุฎูุงุฑุงุช ุงูุชุญุฏูุซ

ุนูุฏ ุชุดุบูู ุงูุณูุฑูุจุชุ ุณุชุธูุฑ ูู 3 ุฎูุงุฑุงุช:

### 1๏ธโฃ ุงุณุชุฎุฏุงู ุงููุทุงู (https://medmapgloble.com)
- ูุณุชุจุฏู ุฌููุน ุนูุงููู `localhost:5000` ุจู `https://medmapgloble.com`
- ููุงุณุจ ุฅุฐุง ููุช ุชุฑูุฏ ุนููุงู ุซุงุจุช

### 2๏ธโฃ ุงุณุชุฎุฏุงู ุนููุงู ูุณุจู (ููุตู ุจู) โญ
- ูุณุชุจุฏู `http://localhost:5000/api` ุจู `/api`
- ูุนูู ุชููุงุฆูุงู ูุน ุฃู ูุทุงู
- **ูุฐุง ูู ุงูุฎูุงุฑ ุงูุฃูุถู**

### 3๏ธโฃ ุฅุฏุฎุงู ุนููุงู ูุฎุตุต
- ููููู ุฅุฏุฎุงู ุฃู ุนููุงู ุชุฑูุฏู

---

## ๐ ูุง ูููู ุจู ุงูุณูุฑูุจุช

1. โ ุฅูุดุงุก ูุณุฎุฉ ุงุญุชูุงุทูุฉ ุชููุงุฆูุฉ
2. โ ูุณุฎ ูููุงุช ุงููุฑููุช ุฅูุฏ ุงูุฌุฏูุฏุฉ
3. โ ุงุณุชุจุฏุงู ุนูุงููู API
4. โ ุชุญุฏูุซ Docker volume
5. โ ุฅุนุงุฏุฉ ุชุดุบูู Nginx
6. โ ูุณุญ ุงููุงุด

---

## ๐ ุงูุชุญูู ูู ุงูุชุญุฏูุซ

### 1. ุงูุชุญูู ูู ุงููููุงุช ูู Volume
```bash
docker run --rm -v medmap_frontend_data:/data alpine ls -la /data
```

### 2. ุงูุชุญูู ูู ูุญุชูู ููู JavaScript
```bash
docker run --rm -v medmap_frontend_data:/data alpine cat /data/static/js/main.*.js | grep -o "localhost:5000"
```

ุฅุฐุง ูู ูุธูุฑ ุฃู ูุชูุฌุฉุ ูุงูุชุญุฏูุซ ูุฌุญ โ

### 3. ุงูุชุญูู ูู ุงููุชุตูุญ
1. ุงูุชุญ ุฃุฏูุงุช ุงููุทูุฑ (F12)
2. ุงุฐูุจ ุฅูู ุชุจููุจ **Network**
3. ุฃุนุฏ ุชุญููู ุงูุตูุญุฉ (Ctrl+F5)
4. ุชุญูู ูู ุนูุงููู ุงูุทูุจุงุช

---

## ๐งน ูุณุญ ุงููุงุด

### ูู ุงููุชุตูุญ
```
Ctrl + Shift + Delete
```
ุฃู
```
Ctrl + F5  (ุฅุนุงุฏุฉ ุชุญููู ูููุฉ)
```

### ูู Nginx
```bash
docker-compose restart nginx
```

---

## ๐ ุงูุงุณุชุนุงุฏุฉ ูู ุงููุณุฎุฉ ุงูุงุญุชูุงุทูุฉ

ุฅุฐุง ุญุฏุซุช ูุดููุฉุ ููููู ุงูุงุณุชุนุงุฏุฉ:

```bash
# ุนุฑุถ ุงููุณุฎ ุงูุงุญุชูุงุทูุฉ
ls -lh backups/frontend_backup_*

# ุงูุงุณุชุนุงุฏุฉ
./restore.sh frontend backups/frontend_backup_YYYYMMDD_HHMMSS.tar.gz
```

---

## ๐๏ธ ุงูุญู ุงููุฏูู (ุฅุฐุง ูู ูุนูู ุงูุณูุฑูุจุช)

### 1. ูุณุฎ ุงููููุงุช ูุฏููุงู
```bash
# ุฅูุดุงุก ูุฌูุฏ ูุคูุช
mkdir -p temp_frontend
cp -r publish/wwwroot/build/* temp_frontend/

# ูุณุฎ ุฅูู volume
docker run --rm \
    -v medmap_frontend_data:/data \
    -v $(pwd)/temp_frontend:/source \
    alpine sh -c "rm -rf /data/* && cp -r /source/* /data/"

# ุชูุธูู
rm -rf temp_frontend
```

### 2. ุฅุนุงุฏุฉ ุชุดุบูู Nginx
```bash
docker-compose restart nginx
```

---

## ๐ก ูุตุงุฆุญ ูููุฉ

### โ ุงูุฃูุถู: ุงุณุชุฎุฏุงู ุนูุงููู ูุณุจูุฉ
ูู ููุฏ React ุงูุฎุงุต ุจูุ ุงุณุชุฎุฏู:
```javascript
// โ ุฎุทุฃ
const API_URL = "http://localhost:5000";

// โ ุตุญูุญ
const API_URL = "";  // ุนููุงู ูุณุจู
// ุฃู
const API_URL = process.env.REACT_APP_API_URL || "";
```

### โ ุงุณุชุฎุฏุงู ูุชุบูุฑุงุช ุงูุจูุฆุฉ
ูู ููู `.env` ูู ูุดุฑูุน React:
```env
REACT_APP_API_URL=
```

ุซู ูู ุงูููุฏ:
```javascript
const API_URL = process.env.REACT_APP_API_URL || "";
axios.get(`${API_URL}/api/users`);
```

### โ ุฅุนุงุฏุฉ ุจูุงุก ุงููุฑููุช ุฅูุฏ ุจุดูู ุตุญูุญ
```bash
# ูู ูุฌูุฏ React
npm run build

# ูุณุฎ ุงููููุงุช
cp -r build/* ../publish/wwwroot/build/

# ุชุญุฏูุซ ูู Docker
make update-frontend
```

---

## ๐ง ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุงููุดููุฉ: ูุง ูุฒุงู ูุทูุจ localhost:5000
**ุงูุญู:**
1. ุงูุณุญ ูุงุด ุงููุชุตูุญ ุชูุงูุงู
2. ุฌุฑุจ ูู ูุถุน ุงูุชุตูุญ ุงูุฎุงุต (Incognito)
3. ุชุญูู ูู ุฃู ุงููููุงุช ุชู ุชุญุฏูุซูุง ูู volume
4. ุฃุนุฏ ุชุดุบูู Nginx

### ุงููุดููุฉ: ุฎุทุฃ CORS
**ุงูุญู:**
ุชุฃูุฏ ูู ุฃู `appsettings.json` ูุญุชูู ุนูู ุงููุทุงู:
```json
"AllowedOrigins": [
  "http://localhost:3000",
  "http://localhost",
  "https://medmapgloble.com"
]
```

### ุงููุดููุฉ: 404 Not Found
**ุงูุญู:**
ุชุญูู ูู ุฅุนุฏุงุฏุงุช Nginx ูู `nginx/conf.d/medmap.conf`

---

## ๐ ุงูุฏุนู

ุฅุฐุง ุงุณุชูุฑุช ุงููุดููุฉ:

1. **ุนุฑุถ ุงูุณุฌูุงุช:**
   ```bash
   docker-compose logs nginx
   docker-compose logs api
   ```

2. **ูุญุต ุงูุตุญุฉ:**
   ```bash
   ./health-check.sh
   ```

3. **ุงูุชุญูู ูู ุงูุงุชุตุงู:**
   ```bash
   curl -I http://localhost
   curl -I http://localhost:5000
   ```

---

## ๐ ูููุงุช ุฐุงุช ุตูุฉ

- `update-frontend.sh` - ุณูุฑูุจุช ุงูุชุญุฏูุซ
- `update.sh` - ุณูุฑูุจุช ุงูุชุญุฏูุซ ุงูุดุงูู
- `nginx/conf.d/medmap.conf` - ุฅุนุฏุงุฏุงุช Nginx
- `publish/appsettings.json` - ุฅุนุฏุงุฏุงุช API

---

**ุชู ุงูุชุญุฏูุซ:** 2025-11-09  
**ุงูุฅุตุฏุงุฑ:** 1.0

